import{I as b,N as y,c as D,a,b as l,e as p,w as t,cl as A,F as x,m as E,o as u,Z as F,r as z,g as _,f as i,t as r,O as R,R as h,a4 as U,S as Y,h as Z,U as q,ak as G,Y as H}from"./app.02c7459f.js";import{u as J}from"./usePostVersions.8b3eb955.js";import{u as K,_ as Q,a as W,b as X}from"./MediaGifs.c2d6f934.js";import{_ as ee}from"./PageHeader.ca32a0c2.js";import{T as se,_ as te}from"./Tab.203b4d79.js";import{_ as ae}from"./SelectableBar.7f85b4bf.js";import{_ as oe}from"./PureDangerButton.35baf161.js";import{_ as le}from"./Panel.30e9fcce.js";import{T as ie}from"./Trash.4a91c762.js";import"./index.browser.8e74d592.js";import"./Masonry.a74c4c08.js";import"./MediaFile.9ef1dcdd.js";import"./ExclamationCircle.70f35379.js";import"./SectionTitle.7cbe1738.js";import"./SearchInput.9560fa3a.js";import"./NoResult.90dab0cf.js";import"./Alert.e0955a42.js";import"./Flex.d1bb12d6.js";const re={class:"w-full mx-auto row-py mb-2xl"},ne={class:"w-full row-px"},me={class:"w-full row-px mt-lg"},Ie={__name:"Media",setup(de){const v=E("workspaceCtx"),{activeTab:n,tabs:P,isDownloading:$,isDeleting:w,downloadExternal:T,deletePermanently:I,getMediaCrediting:L}=K("mixpost.media.fetchStock",{workspace:v.id}),N={uploads:Q,stock:W,gifs:X},m=b(),V=y(()=>N[n.value]),c=y(()=>m.value?m.value.selected:[]),k=()=>{m.value.deselectAll()},B=()=>{const e=n.value!=="uploads";e&&T(c.value.map(s=>{const{id:f,url:o,source:C,author:O,download_data:j}=s;return{id:f,url:o,source:C,author:O,download_data:j}}),s=>{g(s.data)}),e||g(c.value)},{versionObject:S}=J(),g=e=>{G.post(route("mixpost.posts.store",{workspace:v.id}),{versions:[S(0,!0,L(e),e.map(s=>s.id))]})},d=b(!1),M=()=>{const e=c.value.map(s=>s.id);I(e,()=>{k(),m.value.removeItems(e),d.value=!1})};return(e,s)=>{const f=H("tooltip");return u(),D(x,null,[a(l(F),{title:e.$t("media.media_library")},null,8,["title"]),p("div",re,[a(ee,{title:e.$t("media.media_library")},null,8,["title"]),p("div",ne,[a(se,null,{default:t(()=>[(u(!0),D(x,null,z(l(P),o=>(u(),_(te,{key:o,onClick:C=>n.value=o,active:l(n)===o},{default:t(()=>[i(r(e.$t(`media.${o}`)),1)]),_:2},1032,["onClick","active"]))),128))]),_:1})]),p("div",me,[a(le,null,{default:t(()=>[(u(),_(R(l(V)),{ref_key:"sourceProperties",ref:m,columns:4},null,512)),a(ae,{count:l(c).length,onClose:s[1]||(s[1]=o=>k())},{default:t(()=>[a(h,{onClick:B,isLoading:l($),disabled:l($),class:"mr-sm rtl:mr-0 rtl:ml-sm",size:"xs"},{icon:t(()=>[a(U)]),default:t(()=>[i(" "+r(e.$t("media.create_post")),1)]),_:1},8,["isLoading","disabled"]),l(n)==="uploads"?Y((u(),_(oe,{key:0,onClick:s[0]||(s[0]=o=>d.value=!0)},{default:t(()=>[a(ie)]),_:1})),[[f,e.$t("general.delete")]]):Z("",!0)]),_:1},8,["count"])]),_:1})])]),a(A,{show:d.value,variant:"danger",onClose:s[3]||(s[3]=o=>d.value=!1)},{header:t(()=>[i(r(e.$t("media.delete_media")),1)]),body:t(()=>[i(r(e.$t("media.do_you_want_delete")),1)]),footer:t(()=>[a(h,{onClick:s[2]||(s[2]=o=>d.value=!1),class:"mr-xs rtl:mr-0 rtl:ml-xs"},{default:t(()=>[i(r(e.$t("general.cancel")),1)]),_:1}),a(q,{isLoading:l(w),disabled:l(w),onClick:M},{default:t(()=>[i(r(e.$t("general.delete")),1)]),_:1},8,["isLoading","disabled"])]),_:1},8,["show"])],64)}}};export{Ie as default};
