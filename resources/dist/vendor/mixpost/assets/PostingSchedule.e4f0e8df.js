import{I as T,Y as P,o as d,c as p,e as l,a as n,w as a,t as s,F as $,r as V,b as e,H as U,f as _,j as E,S as B,g as A,i as W,l as F,u as S,h as w,X as Z,ct as H,T as Y,cl as q,Z as z,R as C,U as K,m as L,n as R}from"./app.02c7459f.js";import{_ as X}from"./PageHeader.ca32a0c2.js";import{_ as b}from"./Panel.30e9fcce.js";import{W as I}from"./constants.9689ba33.js";import{u as j}from"./useSettings.e38a0e8a.js";import{_ as G}from"./Select.f31f226b.js";import{E as J}from"./ExclamationCircle.70f35379.js";import{F as M,_ as O}from"./Switch.00192ffa.js";import{_ as Q}from"./PureDangerButton.35baf161.js";import"./Flex.d1bb12d6.js";import"./vue.runtime.esm-bundler.56d01ab9.js";const ee={class:"flex flex-col sm:flex-row gap-sm sm:gap-0"},te={value:"everyday"},se=["value"],oe={class:"mr-xs rtl:mr-0 rtl:ml-lg text-gray-400"},le={class:"w-auto",ref:"timePicker"},ie={class:"text-sm flex items-center mt-md"},ae={class:"mr-xs rtl:mr-0 rtl:ml-xs"},ne={__name:"AddPostingTime",props:["modelValue"],emits:["update:modelValue"],setup(v,{emit:k}){const r=v,{timeZone:g,timeFormat:h}=j(),i=T({day:"everyday",time:"06:30"}),f={inline:!0,timeFormat:"H:i",noCalendar:!0,enableTime:!0,time_24hr:h===24},y=()=>{const m=F.exports.cloneDeep(r.modelValue),c=i.value.day==="everyday";if(!c){const t=m.findIndex(o=>parseInt(o.id)===parseInt(i.value.day));m[t].times.push({value:i.value.time,format:i.value.format})}c&&m.forEach(t=>{t.times.push({value:i.value.time,format:i.value.format})}),k("update:modelValue",m)};return(m,c)=>{const t=P("tooltip");return d(),p($,null,[l("div",ee,[l("div",null,[n(G,{modelValue:i.value.day,"onUpdate:modelValue":c[0]||(c[0]=o=>i.value.day=o)},{default:a(()=>[l("option",te,s(m.$t("posting_schedule.everyday")),1),(d(!0),p($,null,V(e(I),o=>(d(),p("option",{key:o.id,value:o.id},s(m.$t(`calendar.weekdays.${o.key}.full`)),9,se))),128))]),_:1},8,["modelValue"])]),l("div",{class:U([{"sm:w-40":e(h)===12,"sm:w-56":e(h)===24},"pickTime flex items-center sm:justify-center sm:mr-lg sm:-mt-1"])},[l("div",oe,s(m.$t("general.time")),1),l("div",le,[n(e(M),{modelValue:i.value.time,"onUpdate:modelValue":c[1]||(c[1]=o=>i.value.time=o),config:f},null,8,["modelValue"])],512)],2),l("div",null,[n(E,{onClick:y},{default:a(()=>[_(s(m.$t("posting_schedule.add_post_time")),1)]),_:1})])]),l("div",ie,[l("div",ae,s(e(g)),1),B((d(),A(e(W),{href:m.route("mixpost.profile.index")},{default:a(()=>[n(J,{class:"!w-4 !h-4"})]),_:1},8,["href"])),[[t,m.$t("posting_schedule.posting_times_determined")]])])],64)}}},re={class:"grid grid-cols-2 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-7 gap-xs"},me={class:"font-medium text-center"},ue={class:"flex justify-center mt-xs"},de={class:"mr-xs"},ce={key:0},pe={key:1},_e={class:"flex flex-col justify-center mt-xs mx-auto"},fe={key:0,class:"text-gray-500 text-sm text-center"},ge=l("span",null,":",-1),ve={class:"uppercase"},he={class:"absolute right-0 opacity-0 group-hover:opacity-100 transition-opacity ease-in-out duration-200"},xe={__name:"PostingTimes",props:{times:{type:Array,default:[]}},emits:["update"],setup(v,{emit:k}){const r=v,{t:g}=S(),{timeZone:h,timeFormat:i}=j(),f=t=>{const o=I.find(u=>u.id===t);return o?g(`calendar.weekdays.${o.key}.full`):null},y=t=>F.exports.sortBy(t.times,[u=>u.value]).map(u=>({value:m(u.value)})),m=t=>i===12?H(t,"hh:mm aaa"):t,c=(t,o)=>{r.times[t].times.splice(o,1)};return(t,o)=>(d(),p("div",re,[(d(!0),p($,null,V(v.times,(u,D)=>(d(),p("div",{key:u.id,class:"flex flex-col border border-gray-300 rounded-lg p-xs"},[l("div",me,s(f(u.id)),1),l("div",ue,[n(O,{modelValue:u.status,"onUpdate:modelValue":x=>u.status=x},{default:a(()=>[l("span",de,[u.status?(d(),p("span",ce,s(e(g)("general.on")),1)):w("",!0),u.status?w("",!0):(d(),p("span",pe,s(e(g)("general.off")),1))])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),l("div",_e,[u.times.length?w("",!0):(d(),p("span",fe,s(e(g)("general.empty")),1)),u.times.length?(d(!0),p($,{key:1},V(y(u),(x,N)=>(d(),p("div",{key:x.value,class:"relative flex items-center justify-between px-lg py-xs group text-gray-500 text-sm"},[l("span",null,s(x.value.split(":")[0]),1),ge,l("span",null,s(x.value.split(":")[1]),1),l("span",ve,s(x.format),1),l("span",he,[n(Q,{onClick:ke=>c(D,N)},{default:a(()=>[n(Z,{class:"!w-5 !-5"})]),_:2},1032,["onClick"])])]))),128)):w("",!0)])]))),128))]))}},ye={class:"w-full mx-auto row-py"},$e={class:"w-full row-px"},Ne={__name:"PostingSchedule",props:{times:{required:!0,type:Array}},setup(v){const k=v,{t:r}=S(),g=L("workspaceCtx"),{notify:h}=R(),i=Y({times:k.times}),f=T(!1),y=()=>{i.times.forEach(c=>{c.times=[]}),f.value=!1},m=()=>{i.put(route("mixpost.postingSchedule.update",{workspace:g.id}),{preserveScroll:!0,onSuccess(){h("success",r("posting_schedule.posting_times_updated"))}})};return(c,t)=>(d(),p($,null,[n(e(z),{title:e(r)("posting_schedule.posting_schedule")},null,8,["title"]),l("div",ye,[n(X,{title:e(r)("posting_schedule.posting_schedule")},{description:a(()=>[_(s(e(r)("posting_schedule.send_posting_schedule")),1)]),_:1},8,["title"]),l("div",$e,[n(b,null,{title:a(()=>[_(s(e(r)("posting_schedule.add_new_posting_time")),1)]),default:a(()=>[n(ne,{modelValue:e(i).times,"onUpdate:modelValue":t[0]||(t[0]=o=>e(i).times=o)},null,8,["modelValue"])]),_:1}),n(b,{class:"mt-lg"},{title:a(()=>[_(s(e(r)("posting_schedule.posting_times")),1)]),description:a(()=>[_(s(e(r)("posting_schedule.send_posting_schedule")),1)]),action:a(()=>[n(C,{onClick:t[1]||(t[1]=o=>f.value=!0)},{default:a(()=>[_(s(e(r)("posting_schedule.clear_all_posting_times")),1)]),_:1})]),default:a(()=>[n(xe,{times:e(i).times},null,8,["times"])]),_:1}),n(E,{onClick:m,disabled:e(i).processing,class:"mt-md"},{default:a(()=>[_(s(e(r)("posting_schedule.update_posting_times")),1)]),_:1},8,["disabled"])])]),n(q,{show:f.value,variant:"danger",onClose:t[3]||(t[3]=o=>f.value=!1)},{header:a(()=>[_(s(e(r)("posting_schedule.clear_all_posting_times")),1)]),body:a(()=>[_(s(e(r)("posting_schedule.confirmation_posting_times")),1)]),footer:a(()=>[n(C,{onClick:t[2]||(t[2]=o=>f.value=!1),class:"mr-xs"},{default:a(()=>[_(s(e(r)("general.cancel")),1)]),_:1}),n(K,{onClick:y},{default:a(()=>[_(s(e(r)("general.delete")),1)]),_:1})]),_:1},8,["show"])],64))}};export{Ne as default};
