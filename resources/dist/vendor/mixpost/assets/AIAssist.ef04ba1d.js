import{E as te}from"./VariableManager.ecf069a6.js";import{_ as B}from"./Flex.d1bb12d6.js";import{p as A,o as l,c as $,e as v,u as ae,I as b,N as V,cI as ne,ae as oe,a as n,ca as N,b as f,aa as se,w as t,F as I,r as ie,g as k,O as le,t as r,f as g,h as C,k as E,$ as re,Y as G,S as q,R as L,j as K,A as de,H as U,X as me,a6 as ce,m as D,cf as H,J as ue,ab as pe}from"./app.02c7459f.js";import{_ as fe,L as ve}from"./ListItem.4f1def85.js";import{_ as _e}from"./NoResult.90dab0cf.js";import{u as Z}from"./useAPIForm.22e8a3a7.js";import{_ as $e}from"./Select.f31f226b.js";import{_ as ge}from"./Textarea.b0fd3982.js";import{_ as F}from"./VerticalGroup.b44ff91a.js";import{R as he}from"./Refresh.d1d5f060.js";import{_ as be}from"./ClipboardButton.4245eb62.js";import{u as ke}from"./Variable.0eaa09f3.js";import"./index.ca3912e7.js";import"./index.316f7c4a.js";import"./vue.runtime.esm-bundler.56d01ab9.js";import"./usePostVersions.8b3eb955.js";import"./MediaGifs.c2d6f934.js";import"./index.browser.8e74d592.js";import"./Masonry.a74c4c08.js";import"./MediaFile.9ef1dcdd.js";import"./ExclamationCircle.70f35379.js";import"./SectionTitle.7cbe1738.js";import"./SearchInput.9560fa3a.js";import"./Alert.e0955a42.js";import"./Tab.203b4d79.js";import"./EllipsisVertical.b7e378de.js";import"./Trash.4a91c762.js";import"./Clipboard.bccf7a10.js";const ye={},xe={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},we=v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"},null,-1),Ce=[we];function Le(o,a){return l(),$("svg",xe,Ce)}const j=A(ye,[["render",Le]]),Se={},ze={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},Be=v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1),je=[Be];function Ie(o,a){return l(),$("svg",ze,je)}const J=A(Se,[["render",Ie]]),Me={},Ne={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},De=v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"},null,-1),Ve=[De];function Ee(o,a){return l(),$("svg",Ne,Ve)}const O=A(Me,[["render",Ee]]),Ae=["onKeydown"],Pe={class:"mt-xs"},Re={key:1,class:"mr-[8px]"},Te={__name:"Spotlight",emits:["selected-command"],setup(o,{emit:a}){const{t:e}=ae(),m=[{name:"rephrase",nameLocalized:e("ai.rephrase"),icon:"Sparkles"},{name:"fix_spelling_grammar",nameLocalized:e("ai.fix_spelling_grammar"),icon:"Sparkles"},{name:"expand",nameLocalized:e("ai.expand"),icon:"PlusSimple"},{name:"shorten",nameLocalized:e("ai.shorten"),icon:"Minus"},{name:"simplify",nameLocalized:e("ai.simplify"),icon:"Sparkles"},{name:"friendly_tone",nameLocalized:e("ai.friendly_tone"),icon:"",emoji:"\u{1F60A}"},{name:"formal_tone",nameLocalized:e("ai.formal_tone"),icon:"",emoji:"\u{1F3A9}"},{name:"edgy_tone",nameLocalized:e("ai.edgy_tone"),icon:"",emoji:"\u{1F918}"},{name:"engaging_tone",nameLocalized:e("ai.engaging_tone"),icon:"",emoji:"\u{1F91D}"},{name:"generate",nameLocalized:e("general.generate_new"),icon:"Sparkles"}],c=b(""),s=b("improve"),h=b(0),y={Sparkles:j,PlusSimple:J,Minus:O},d=V(()=>m.filter(u=>ne(u.name).toLocaleLowerCase().includes(c.value.toLocaleLowerCase()))),x=u=>{s.value=u.name,a("selected-command",s.value)},w=u=>{u.key==="ArrowDown"||u.key==="Tab"?h.value<d.value.length-1?h.value++:h.value=0:u.key==="ArrowUp"&&(h.value>0?h.value--:h.value=d.value.length-1),s.value=d.value[h.value].name};return oe(c,()=>{d.value.length>0&&(s.value=d.value[0].name)}),(u,p)=>(l(),$("div",{onKeydown:[N(E(w,["prevent"]),["up"]),N(E(w,["prevent"]),["down"]),N(E(w,["prevent"]),["tab"])]},[v("div",Pe,[n(se,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=_=>c.value=_),onKeydown:p[1]||(p[1]=N(_=>u.$emit("selected-command",s.value),["enter"])),type:"text",autofocus:"",placeholder:f(e)("general.search_jump"),class:"w-full"},null,8,["modelValue","placeholder"])]),n(ve,{class:"mt-xs"},{default:t(()=>[(l(!0),$(I,null,ie(f(d),_=>(l(),k(fe,{onClick:M=>x(_),active:s.value===_.name,tabindex:"0",role:"button"},{default:t(()=>[n(B,null,{default:t(()=>[_.icon?(l(),k(le(y[_.icon]),{key:0,class:"text-stone-800"})):(l(),$("div",Re,r(_.emoji),1)),g(" "+r(_.nameLocalized),1)]),_:2},1024)]),_:2},1032,["onClick","active"]))),256)),f(d).length?C("",!0):(l(),k(_e,{key:0,class:"p-md"}))]),_:1})],40,Ae))}},Fe={class:"relative h-10 mt-lg"},X={__name:"Preloader",setup(o){return(a,e)=>(l(),$("div",Fe,[n(re,null,{default:t(()=>[g(r(a.$t("ai.is_writing")),1)]),_:1})]))}},Ge={class:"p-md rounded-md border border-primary-500"},Y={__name:"GeneratedContent",props:{text:{type:String,required:!0},buttonsDisabled:{type:Boolean,default:!1},insertButtonName:{type:String,default:""}},emits:["clickInsert","clickRetry"],setup(o){const a=b("");return(e,m)=>{const c=G("tooltip");return l(),$("div",Ge,[v("p",{ref_key:"dom",ref:a},r(o.text),513),n(B,{class:"mt-md justify-between items-center"},{default:t(()=>[q(n(be,{htmlElm:a.value,"show-text":!1,size:"xs",disabled:o.buttonsDisabled,component:"PureButton"},null,8,["htmlElm","disabled"]),[[c,e.$t("system.copy")]]),n(B,null,{default:t(()=>[n(L,{onClick:m[0]||(m[0]=s=>e.$emit("clickRetry")),size:"xs",disabled:o.buttonsDisabled},{icon:t(()=>[n(he)]),default:t(()=>[g(" "+r(e.$t("general.retry")),1)]),_:1},8,["disabled"]),n(K,{onClick:m[1]||(m[1]=s=>e.$emit("clickInsert")),size:"sm",disabled:o.buttonsDisabled},{default:t(()=>[g(r(o.insertButtonName?o.insertButtonName:e.$t("general.insert")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})])}}},qe={role:"button",class:"flex justify-between p-sm border border-stone-600 hover:border-stone-700 transition ease-in-out duration-200 w-full rounded-md"},Q={__name:"DraftContent",props:{clearable:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1}},emits:["clickClear"],setup(o){return(a,e)=>(l(),$("div",qe,[v("div",{class:U({"overflow-hidden text-ellipsis truncate":!o.expanded})},[de(a.$slots,"default")],2),o.clearable?(l(),k(ce,{key:0,onClick:e[0]||(e[0]=m=>a.$emit("clickClear"))},{default:t(()=>[n(me)]),_:1})):C("",!0)]))}},Ke=v("div",{class:"text-lg"},"\u{1F60A}",-1),Ue=v("div",{class:"text-lg"},"\u{1F3A9}",-1),He=v("div",{class:"text-lg"},"\u{1F918}",-1),Ze=v("div",{class:"text-lg"},"\u{1F91D}",-1),W={__name:"Commands",props:{disabled:{type:Boolean,default:!1}},emits:["selected-command"],setup(o){return(a,e)=>(l(),k(B,{wrap:!0,class:"justify-end"},{default:t(()=>[n(L,{onClick:e[0]||(e[0]=m=>a.$emit("selected-command","rephrase")),disabled:o.disabled,size:"xs"},{icon:t(()=>[n(j)]),default:t(()=>[g(" "+r(a.$t("ai.rephrase")),1)]),_:1},8,["disabled"]),n(L,{onClick:e[1]||(e[1]=m=>a.$emit("selected-command","expand")),disabled:o.disabled,size:"xs"},{icon:t(()=>[n(J)]),default:t(()=>[g(" "+r(a.$t("ai.expand")),1)]),_:1},8,["disabled"]),n(L,{onClick:e[2]||(e[2]=m=>a.$emit("selected-command","shorten")),disabled:o.disabled,size:"xs"},{icon:t(()=>[n(O)]),default:t(()=>[g(" "+r(a.$t("ai.shorten")),1)]),_:1},8,["disabled"]),n(L,{onClick:e[3]||(e[3]=m=>a.$emit("selected-command","simplify")),disabled:o.disabled,size:"xs"},{icon:t(()=>[n(j)]),default:t(()=>[g(" "+r(a.$t("ai.simplify")),1)]),_:1},8,["disabled"]),n(L,{onClick:e[4]||(e[4]=m=>a.$emit("selected-command","friendly_tone")),disabled:o.disabled,size:"xs"},{icon:t(()=>[Ke]),default:t(()=>[g(" "+r(a.$t("ai.more_friendly")),1)]),_:1},8,["disabled"]),n(L,{onClick:e[5]||(e[5]=m=>a.$emit("selected-command","formal_tone")),disabled:o.disabled,size:"xs"},{icon:t(()=>[Ue]),default:t(()=>[g(" "+r(a.$t("ai.more_formal")),1)]),_:1},8,["disabled"]),n(L,{onClick:e[6]||(e[6]=m=>a.$emit("selected-command","edgy_tone")),disabled:o.disabled,size:"xs"},{icon:t(()=>[He]),default:t(()=>[g(" "+r(a.$t("ai.more_edgy")),1)]),_:1},8,["disabled"]),n(L,{onClick:e[7]||(e[7]=m=>a.$emit("selected-command","engaging_tone")),disabled:o.disabled,size:"xs"},{icon:t(()=>[Ze]),default:t(()=>[g(" "+r(a.$t("ai.more_engaging")),1)]),_:1},8,["disabled"])]),_:1}))}},Je={for:"prompt"},Oe={for:"tone"},Xe={value:"neutral"},Ye={value:"friendly"},Qe={value:"formal"},We={value:"edgy"},et={value:"engaging"},tt={key:0},at={key:1},nt={__name:"TextGenerator",props:{characterLimit:{type:Number,default:1e3}},emits:["insert"],setup(o,{emit:a}){const e=o,m=D("routePrefix"),c=D("workspaceCtx"),s=Z({prompt:"",tone:"neutral",character_limit:e.characterLimit>1e3?1e3:e.characterLimit,text:"",command:""}),h=b("form"),y=b(!1),d=b(!1),x=b(""),w=V(()=>h.value==="form"),u=i=>{h.value=i},p=()=>{u("form"),d.value=!0},_=()=>{u("result"),d.value=!1},M=()=>{s.reset(),p(),y.value=!1,d.value=!1,x.value=""},{onCatch:P}=H(),R=()=>{_(),s.transform(i=>({prompt:i.prompt,tone:i.tone,character_limit:i.character_limit})).post(route(`${m}.ai.text.generate`,{workspace:c.id}),{onSuccess(i){x.value=i.text,y.value=!0},onError(i){P(i)}})},T=()=>{_(),s.transform(i=>({text:i.text,command:i.command,character_limit:i.character_limit>1e3?1e3:i.character_limit})).post(route(`${m}.ai.text.modify`,{workspace:c.id}),{onSuccess(i){x.value=i.text},onError(i){P(i)}})},ee=()=>{if(!s.command){R();return}T()};return(i,S)=>(l(),$(I,null,[f(w)?(l(),$(I,{key:0},[n(F,null,{title:t(()=>[v("label",Je,r(i.$t("ai.tell_ai")),1)]),default:t(()=>[n(ge,{modelValue:f(s).prompt,"onUpdate:modelValue":S[0]||(S[0]=z=>f(s).prompt=z),id:"prompt",rows:"4",autofocus:"",placeholder:i.$t("ai.write_about")},null,8,["modelValue","placeholder"])]),_:1}),n(F,{class:"mt-lg"},{title:t(()=>[v("label",Oe,r(i.$t("ai.tone_")),1)]),default:t(()=>[n($e,{modelValue:f(s).tone,"onUpdate:modelValue":S[1]||(S[1]=z=>f(s).tone=z),id:"tone"},{default:t(()=>[v("option",Xe,r(i.$t("ai.tone.neutral")),1),v("option",Ye,"\u{1F60A} "+r(i.$t("ai.tone.friendly")),1),v("option",Qe,"\u{1F3A9} "+r(i.$t("ai.tone.formal")),1),v("option",We,"\u{1F918} "+r(i.$t("ai.tone.edgy")),1),v("option",et,"\u{1F91D} "+r(i.$t("ai.tone.engaging")),1)]),_:1},8,["modelValue"])]),_:1}),n(B,{class:"mt-lg justify-end"},{default:t(()=>[y.value?(l(),k(L,{key:0,onClick:_},{default:t(()=>[g(r(i.$t("general.cancel")),1)]),_:1})):C("",!0),n(K,{onClick:R,size:"md",isLoading:f(s).processing,disabled:f(s).processing||!f(s).prompt},{icon:t(()=>[n(j)]),default:t(()=>[d.value?(l(),$("span",at,r(i.$t("general.generate_new")),1)):(l(),$("span",tt,r(i.$t("general.generate")),1))]),_:1},8,["isLoading","disabled"])]),_:1})],64)):C("",!0),f(w)?C("",!0):(l(),k(Q,{key:1,onClick:p,onClickClear:M,clearable:!f(s).processing,class:"mt-xs"},{default:t(()=>[g(r(f(s).prompt),1)]),_:1},8,["clearable"])),f(s).processing?(l(),k(X,{key:2})):C("",!0),y.value&&!f(s).processing?(l(),$(I,{key:3},[n(Y,{onClickInsert:S[2]||(S[2]=z=>i.$emit("insert",x.value)),onClickRetry:ee,text:x.value,buttonsDisabled:d.value,insertButtonName:"Insert",class:U(["mt-lg",{"opacity-50":d.value}])},null,8,["text","buttonsDisabled","class"]),n(W,{onSelectedCommand:S[3]||(S[3]=z=>{f(s).command=z,f(s).text=x.value,T()}),disabled:d.value,class:"mt-lg"},null,8,["disabled"])],64)):C("",!0)],64))}},ot={class:"font-medium"},st={key:1,class:"mt-lg"},it={class:"font-medium"},lt={__name:"TextModifier",props:{text:{type:String,required:!0},command:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["replace"],setup(o){const a=o,e=D("routePrefix"),m=D("workspaceCtx"),c=Z({text:a.text,command:a.command,character_limit:a.characterLimit>1e3?1e3:a.characterLimit}),{getTextFromHtmlString:s}=ke(),h=V(()=>s(a.text)),y=b(!1),d=b(""),{onCatch:x}=H();ue(()=>{w()});const w=()=>{c.post(route(`${e}.ai.text.modify`,{workspace:m.id}),{onSuccess(u){d.value=u.text},onError(u){x(u)}})};return(u,p)=>(l(),$(I,null,[v("div",null,[v("div",ot,r(u.$t("ai.draft_content")),1),n(Q,{onClick:p[0]||(p[0]=_=>y.value=!y.value),expanded:y.value,class:"mt-xs"},{default:t(()=>[g(r(f(h)),1)]),_:1},8,["expanded"])]),f(c).processing?(l(),k(X,{key:0})):C("",!0),d.value&&!f(c).processing?(l(),$("div",st,[v("div",it,r(u.$t("ai.generated_content")),1),n(Y,{onClickInsert:p[1]||(p[1]=_=>u.$emit("replace",d.value)),onClickRetry:w,text:d.value,insertButtonName:u.$t("general.replace"),class:"mt-xs"},null,8,["text","insertButtonName"]),n(W,{onSelectedCommand:p[2]||(p[2]=_=>{f(c).command=_,f(c).text=d.value,w()}),class:"mt-lg"})])):C("",!0)],64))}},Et={__name:"AIAssist",props:{text:{type:String,required:!0},characterLimit:{type:Number,default:1e3}},emits:["insert","replace","close"],setup(o,{emit:a}){const e=o,m=b(!1),c=b("spotlight"),s=b(""),h=V(()=>e.text===""||e.text==="<div></div>"),y=()=>{h.value&&(c.value="generator"),m.value=!0},d=()=>{m.value=!1,c.value="spotlight"},x=p=>{if(p!=="generate"){c.value="modifier",s.value=p;return}c.value="generator"},w=p=>{a("insert",p),d()},u=p=>{a("replace",p),d()};return(p,_)=>{const M=G("tooltip");return l(),$("div",null,[q((l(),k(te,{onClick:y},{default:t(()=>[n(j)]),_:1})),[[M,"AI Assist"]]),n(pe,{show:m.value,onClose:d,"max-width":"md",closeable:!0,"scrollable-body":!0},{header:t(()=>[n(B,{class:"items-center"},{default:t(()=>[n(j,{class:"text-stone-800"}),g(" "+r(p.$t("ai.ai_assist")),1)]),_:1})]),body:t(()=>[c.value==="spotlight"?(l(),k(Te,{key:0,onSelectedCommand:x})):C("",!0),c.value==="generator"?(l(),k(nt,{key:1,onInsert:w,characterLimit:o.characterLimit},null,8,["characterLimit"])):C("",!0),c.value==="modifier"?(l(),k(lt,{key:2,onReplace:u,text:o.text,characterLimit:o.characterLimit,command:s.value},null,8,["text","characterLimit","command"])):C("",!0)]),_:1},8,["show"])])}}};export{Et as default};
